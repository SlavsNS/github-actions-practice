name: Node.js CI

# Коли запускати пайплайн
on:
  push:
    branches: [ "main" ]

jobs:
  build:
    # Середовище для виконання (віртуальна машина)
    runs-on: ubuntu-latest

    steps:
      # Крок 1: Завантаження коду з репозиторію
      - name: Checkout code
        uses: actions/checkout@v4

      # Крок 2: Встановлення Node.js
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # Рекомендую використовувати стабільну версію

      # Крок 3: Встановлення залежностей
      - name: Install dependencies
        run: npm install

      # Крок 4: Запуск білду
      - name: Build project
        run: npm run build

      # Крок 5: Збереження артефакту (результату білду)
      - name: Upload Build Artifact
        uses: actions/upload-artifact@v4
        with:
          name: build-output
          # Вказуємо папку або файл, який треба зберегти. 
          # Зазвичай білд Node.js проектів потрапляє в 'dist' або 'build'.
          # Якщо у тебе просто index.js, можна вказати його.
          path: .